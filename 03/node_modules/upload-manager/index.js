const {EventEmitter} = require('events');

console.log('Run module code');

module.exports.UploadManager = class UploadManager extends EventEmitter{

    constructor(){
        super();
    }

    upload(url){
        let _this = this,
            progress = 0,
            fileSize = 0;

        console.log(`Upload started ${url}`);

        let progressInterval = setInterval(()=>{
            progress +=20;
            fileSize +=50;
            this.emit('progress', {'progress':progress, 'size':fileSize});
        }, 100);

        setTimeout(()=>{
            clearInterval(progressInterval);

            this.emit('finished', fileSize);
        },550);

    }
}//UploadManager
